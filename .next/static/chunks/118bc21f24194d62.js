(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93149,(e,t,a)=>{t.exports=e.r(82396)},75528,e=>{"use strict";var t=e.i(49973),a=e.i(18939),n=e.i(93149),r=e.i(50417),s=e.i(68824);let l=["Consulting the Naughty Ledger...","Shaking the snow globe...","Summoning seasonal spirits...","Untangling lights (pray for us)...","Counting reindeer (one is missing)...","Baking suspicious cookies...","Measuring holiday chaos...","Checking twice, regretting once...","Warming up the sleigh engine...","Rewrapping destiny...","Assembling your festive vibe...","Negotiating with the elves...","Lighting a candle for dramatic effect...","Opening the vault of jingles...","Searching for the perfect jingle..."],i=["Santa Claus","Mall Santa","Rudolph","Non-Rudolph Reindeer","The Grinch","Krampus","Frosty the Snowman","Charlie Brown","Polar Bear","Orphan From a Christmas Movie","Blow-Up Inflatable Santa","Jesus","Baby Jesus","Jesus Dressed as Santa","Elf Union Organizer","The Mistletoe Menace","The Tree on the Roof of the Car","The Uninvited Caroler","The Eggnog Alchemist","The Gift Receipt Goblin","The Sleigh Mechanic","The Haunted Nutcracker","The Last-Minute Shopper","The Snow Day Extrovert","The Holiday Ghost Who Means Well"],o=["You radiate festive chaos with a hint of menace.","Your vibe says: jingle hard, sleep later.","People are not sure if youâ€™re a gift or a warning.","You show up late, but you always bring the plot twist.","Holiday cheer follows you, slightly out of breath."];function h(){let e=(0,n.useRouter)(),{state:h,ready:c,resetGame:u}=(0,r.useGameState)(),[d,m]=(0,a.useState)("loading"),[g,p]=(0,a.useState)(null),[x,f]=(0,a.useState)(0),[b,w]=(0,a.useState)(0),y=(0,a.useMemo)(()=>h?{name:h.name,questions:h.questionIds.map(e=>s.QUESTIONS_BY_ID.get(e)).filter(Boolean).map(e=>({prompt:e.prompt,options:e.options})),answers:h.answers}:null,[h]);return((0,a.useEffect)(()=>{c&&(!h||h.answers.length<5)&&e.replace("/")},[c,h,e]),(0,a.useEffect)(()=>{if(!y)return;let e=!0,t=new AbortController,a=Date.now(),n=2200+Math.floor(1200*Math.random());return(async()=>{try{let r=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),signal:t.signal}),s=await r.json(),l=Date.now()-a,i=Math.max(0,n-l);if(i&&await new Promise(e=>setTimeout(e,i)),!e)return;p(s),f(100),m("reveal")}catch{let t;if(!e)return;p({characterName:i[(t=(e=>{let t=0;for(let a=0;a<e.length;a+=1)t=(t<<5)-t+e.charCodeAt(a)|0;return Math.abs(t)})(`${h?.name??"guest"}${JSON.stringify(h?.answers??[])}`))%i.length]??"Santa Claus",revealText:o.slice(0,3+t%3).join(" ")}),f(100),m("reveal")}})(),()=>{e=!1,t.abort()}},[y,h]),(0,a.useEffect)(()=>{if("loading"!==d)return;let e=Date.now(),t=setInterval(()=>{let t=Math.min(94,Math.round((Date.now()-e)/3400*100));f(e=>e>t?e:t)},80);return()=>clearInterval(t)},[d]),(0,a.useEffect)(()=>{if("loading"!==d)return;let e=setInterval(()=>{w(e=>(e+1)%l.length)},520);return()=>clearInterval(e)},[d]),"loading"===d)?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center px-4 py-10",children:(0,t.jsxs)("div",{className:"w-full max-w-xl rounded-[32px] border border-white/10 bg-black/50 p-8 text-center shadow-[0_30px_60px_rgba(0,0,0,0.45)] backdrop-blur",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-200/80",children:"Scanning Holiday Alignment"}),(0,t.jsx)("h2",{className:"mt-4 text-4xl font-semibold font-[var(--font-heading)] text-amber-50",children:l[b]}),(0,t.jsx)("div",{className:"mt-8 h-3 w-full overflow-hidden rounded-full bg-white/10",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-300 via-amber-300 to-red-400 transition-all",style:{width:`${x}%`}})}),(0,t.jsxs)("p",{className:"mt-3 text-sm text-white/60",children:[x,"% complete"]})]})}):g?(0,t.jsx)("main",{className:"min-h-screen px-4 py-10 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl rounded-[32px] border border-white/10 bg-black/50 p-10 shadow-[0_30px_60px_rgba(0,0,0,0.45)] backdrop-blur",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-200/80",children:"Festive Fate Unlocked"}),(0,t.jsxs)("h1",{className:"mt-4 text-5xl sm:text-6xl font-semibold font-[var(--font-heading)] text-amber-50",children:["YOU ARE: ",g.characterName]}),g.tagline?(0,t.jsx)("p",{className:"mt-3 text-lg text-amber-200/90",children:g.tagline}):null,(0,t.jsx)("p",{className:"mt-6 text-lg leading-relaxed text-white/85",children:g.revealText}),(0,t.jsx)("button",{type:"button",onClick:()=>{u(),e.push("/")},className:"mt-8 w-full rounded-2xl bg-red-400 px-6 py-4 text-lg font-semibold text-black shadow-[0_15px_30px_rgba(214,59,59,0.25)] transition hover:-translate-y-0.5",children:"Play Again"})]})}):(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-white/70",children:"Summoning your result..."})})}e.s(["default",()=>h],75528)}]);